{"ast":null,"code":"var _jsxFileName = \"E:\\\\Study\\\\Cong_Nghe_Phan_Mem_Moi\\\\Project_mau\\\\React-Js-Ecommerce-with-Laravel-8-main\\\\src\\\\AdminPrivateRoute.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Route, Redirect, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport MasterLayout from './layouts/admin/MasterLayout';\nimport swal from 'sweetalert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AdminPrivateRoute({ ...rest\n}) {\n  _s();\n\n  const history = useHistory();\n  const [Authenticated, setAuthenticated] = useState(false);\n  const [loading, setloading] = useState(true); // useEffect(() => {\n  //     axios.get(`/api/checkingAuthenticated`).then(res=> {\n  //         if(res.status === 200)\n  //         {\n  //             setAuthenticated(true);\n  //         }\n  //         setloading(false);\n  //     });\n  //     return () => {\n  //         setAuthenticated(false);\n  //     };\n  // }, []);\n\n  if (!localStorage.getItem(\"auth_token\")) {\n    setloading(true);\n  } else {\n    setAuthenticated(true);\n  }\n\n  axios.interceptors.response.use(undefined, function axiosRetryInterceptor(err) {\n    if (err.response.status === 401) {\n      swal(\"Unauthorized\", err.response.data.message, \"warning\");\n      history.push('/');\n    }\n\n    return Promise.reject(err);\n  });\n  axios.interceptors.response.use(function (response) {\n    return response;\n  }, function (error) {\n    if (error.response.status === 403) // Access Denied\n      {\n        swal(\"Forbidden\", error.response.data.message, \"warning\");\n        history.push('/403');\n      } else if (error.response.status === 404) //Page Not Found\n      {\n        swal(\"404 Error\", \"Url/Page Not Found\", \"warning\");\n        history.push('/404');\n      }\n\n    return Promise.reject(error);\n  });\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Route, { ...rest,\n    render: ({\n      props,\n      location\n    }) => Authenticated ? /*#__PURE__*/_jsxDEV(MasterLayout, { ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 19\n    }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n      to: {\n        pathname: \"/login\",\n        state: {\n          from: location\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 19\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AdminPrivateRoute, \"8+jWPS1mKg1SMaEU/q2lFnV0yBY=\", false, function () {\n  return [useHistory];\n});\n\n_c = AdminPrivateRoute;\nexport default AdminPrivateRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminPrivateRoute\");","map":{"version":3,"sources":["E:/Study/Cong_Nghe_Phan_Mem_Moi/Project_mau/React-Js-Ecommerce-with-Laravel-8-main/src/AdminPrivateRoute.js"],"names":["React","useState","useEffect","Route","Redirect","useHistory","axios","MasterLayout","swal","AdminPrivateRoute","rest","history","Authenticated","setAuthenticated","loading","setloading","localStorage","getItem","interceptors","response","use","undefined","axiosRetryInterceptor","err","status","data","message","push","Promise","reject","error","props","location","pathname","state","from"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAwBC,SAAxB,QAAwC,OAAxC;AACA,SAAQC,KAAR,EAAeC,QAAf,EAAyBC,UAAzB,QAA0C,kBAA1C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,IAAP,MAAiB,YAAjB;;;AAEA,SAASC,iBAAT,CAA2B,EAAC,GAAGC;AAAJ,CAA3B,EAAsC;AAAA;;AAElC,QAAMC,OAAO,GAAGN,UAAU,EAA1B;AAEA,QAAM,CAACO,aAAD,EAAgBC,gBAAhB,IAAoCZ,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,IAAD,CAAtC,CALkC,CAOlC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA,MAAG,CAACe,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAJ,EAAuC;AACnCF,IAAAA,UAAU,CAAC,IAAD,CAAV;AACH,GAFD,MAEK;AACDF,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACH;;AAEDP,EAAAA,KAAK,CAACY,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgCC,SAAhC,EAA2C,SAASC,qBAAT,CAA+BC,GAA/B,EAAoC;AAC3E,QAAGA,GAAG,CAACJ,QAAJ,CAAaK,MAAb,KAAwB,GAA3B,EACA;AACIhB,MAAAA,IAAI,CAAC,cAAD,EAAgBe,GAAG,CAACJ,QAAJ,CAAaM,IAAb,CAAkBC,OAAlC,EAA0C,SAA1C,CAAJ;AACAf,MAAAA,OAAO,CAACgB,IAAR,CAAa,GAAb;AACH;;AACD,WAAOC,OAAO,CAACC,MAAR,CAAeN,GAAf,CAAP;AACH,GAPD;AASAjB,EAAAA,KAAK,CAACY,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgC,UAAUD,QAAV,EAAoB;AAC5C,WAAOA,QAAP;AACH,GAFL,EAEO,UAAUW,KAAV,EAAiB;AAChB,QAAGA,KAAK,CAACX,QAAN,CAAeK,MAAf,KAA0B,GAA7B,EAAkC;AAClC;AACIhB,QAAAA,IAAI,CAAC,WAAD,EAAasB,KAAK,CAACX,QAAN,CAAeM,IAAf,CAAoBC,OAAjC,EAAyC,SAAzC,CAAJ;AACAf,QAAAA,OAAO,CAACgB,IAAR,CAAa,MAAb;AACH,OAJD,MAKK,IAAGG,KAAK,CAACX,QAAN,CAAeK,MAAf,KAA0B,GAA7B,EAAkC;AACvC;AACIhB,QAAAA,IAAI,CAAC,WAAD,EAAa,oBAAb,EAAkC,SAAlC,CAAJ;AACAG,QAAAA,OAAO,CAACgB,IAAR,CAAa,MAAb;AACH;;AACD,WAAOC,OAAO,CAACC,MAAR,CAAeC,KAAf,CAAP;AACH,GAdL;;AAiBA,MAAGhB,OAAH,EACA;AACI,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAED,sBAEI,QAAC,KAAD,OAAWJ,IAAX;AACI,IAAA,MAAM,EAAG,CAAC;AAACqB,MAAAA,KAAD;AAAQC,MAAAA;AAAR,KAAD,KACLpB,aAAa,gBACX,QAAC,YAAD,OAAkBmB;AAAlB;AAAA;AAAA;AAAA;AAAA,YADW,gBAEX,QAAC,QAAD;AAAU,MAAA,EAAE,EAAE;AAACE,QAAAA,QAAQ,EAAE,QAAX;AAAqBC,QAAAA,KAAK,EAAE;AAACC,UAAAA,IAAI,EAAEH;AAAP;AAA5B;AAAd;AAAA;AAAA;AAAA;AAAA;AAJV;AAAA;AAAA;AAAA;AAAA,UAFJ;AAWH;;GAtEQvB,iB;UAEWJ,U;;;KAFXI,iB;AAwET,eAAeA,iBAAf","sourcesContent":["import React, {useState,useEffect} from 'react';\nimport {Route, Redirect, useHistory} from 'react-router-dom';\nimport axios from 'axios';\nimport MasterLayout from './layouts/admin/MasterLayout';\nimport swal from 'sweetalert';\n\nfunction AdminPrivateRoute({...rest}) {\n\n    const history = useHistory();\n\n    const [Authenticated, setAuthenticated] = useState(false);\n    const [loading, setloading] = useState(true);\n\n    // useEffect(() => {\n\n    //     axios.get(`/api/checkingAuthenticated`).then(res=> {\n    //         if(res.status === 200)\n    //         {\n    //             setAuthenticated(true);\n    //         }\n    //         setloading(false);\n    //     });\n\n    //     return () => {\n    //         setAuthenticated(false);\n    //     };\n    // }, []);\n\n    if(!localStorage.getItem(\"auth_token\")){\n        setloading(true);\n    }else{\n        setAuthenticated(true);\n    }\n\n    axios.interceptors.response.use(undefined, function axiosRetryInterceptor(err) {\n        if(err.response.status === 401)\n        {\n            swal(\"Unauthorized\",err.response.data.message,\"warning\");\n            history.push('/');\n        }\n        return Promise.reject(err);\n    });\n\n    axios.interceptors.response.use(function (response) {\n            return response;\n        }, function (error) {\n            if(error.response.status === 403) // Access Denied\n            {\n                swal(\"Forbidden\",error.response.data.message,\"warning\");\n                history.push('/403');\n            }\n            else if(error.response.status === 404) //Page Not Found\n            {\n                swal(\"404 Error\",\"Url/Page Not Found\",\"warning\");\n                history.push('/404');\n            }\n            return Promise.reject(error);\n        }\n    );\n\n    if(loading)\n    {\n        return <h1>Loading...</h1>\n    }\n\n    return (\n\n        <Route {...rest}\n            render={ ({props, location}) => \n                Authenticated ?\n                ( <MasterLayout {...props} /> ) :\n                ( <Redirect to={{pathname: \"/login\", state: {from: location} }} /> ) \n            }\n        />\n\n    );\n}\n\nexport default AdminPrivateRoute;\n"]},"metadata":{},"sourceType":"module"}